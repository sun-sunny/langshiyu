function fillDetail(i){var e=urlSearch();$.ajax({type:"get",url:e+"/system/rest/projects/getProjectDetailForFront/"+i,datatype:"json",cache:!1,beforeSend:function(){},success:function(i){console.log(i),$("head title").text(i.prjName),$("#main").attr("data-id",i.area),fillBanner(i.detailImgs),fillIntro(i),fillAround(i),fillConfigure(i)},complete:function(){},error:function(i){tip("error",i.message,"3000")}})}function fillBanner(i){for(var e=$(window).width()+"px",s=1.8*$(window).width()/3+"px",n='<div class="swiper-container  swiper-bg"><div class="swiper-wrapper">',t=0;t<i.length;t++)n+='<div class="swiper-slide"><img style="width:'+e+";height:"+s+';"src="'+i[t].fullPath+'" alt="" /></div>';n+=i.length>1?'</div><div class="swiper-button-prev swiper-button-white"></div><div class="swiper-button-next swiper-button-white"></div></div>':"</div></div>",$("#main>.banner").append(n),new Swiper("#main>.banner .swiper-container",{loop:!0,autoplay:3e3,effect:"fade",preloadImages:!1,lazyLoading:!0,prevButton:".banner .swiper-button-prev",nextButton:".banner .swiper-button-next"})}function sleep(i){for(var e=new Date,s=e.getTime()+i;;)if(e=new Date,e.getTime()>s)return}function fillIntro(i){var e="";e+='<div class="mes mb25"><h3 lass="fl">&yen '+(0===parseInt(i.price)?" 待更新":i.price)+"</h3></div>",e+='<h2 class="mb20">'+i.prjName+"</h2>",e+='<p class="mb20"><i class="iconfont icon-location"></i><span>'+i.addressLine1+"</span></p>",e+='<p class="mb20">社区简介：</p>',e+="<article>"+i.desc+'</article><span class="longline mb40"></span>',$("#main>.intro").append(e)}function fillAround(i){var e='<div class="map" id="allmap"></div>';e+='<h3><i class="iconfont icon-business larger"></i><span>商业配套</span></h3><span class="shortline"></span><article>'+i.commercialFacility+"</article>",e+='<h3><i class="iconfont icon-traffic larger"></i><span>交通出行</span></h3><span class="shortline"></span><article title="">',null!==i.trafficBus&&(e+="<p><b>地铁：</b>"+i.trafficSubway+"</p>"),null!==i.trafficSubway&&(e+="<p><b>公交：</b>"+i.trafficBus+"</p>"),e+="</article>",e+='<span class="longline"></span>',$("#main>.around").append(e);var s=new BMap.Map("allmap"),n=new BMap.Point(116.331398,39.897445);s.centerAndZoom(n,12);var t=new BMap.Geocoder;t.getPoint(i.addressLine1,function(i){i?(s.centerAndZoom(i,16),s.addOverlay(new BMap.Marker(i)),s.enableScrollWheelZoom(!0),s.disableDragging()):alert("您选择地址没有解析到结果!")},"")}function fillConfigure(i){var e=$(window).width()+"px",s=1*$(window).width()/2+"px";if("1"==i.roomTypeList.length)var n='<h3 class="mb25">居住空间</h3>';else var n='<h3 class="mb25">居住空间 <span class="fr"><i class="iconfont icon-pageleft prev unable"></i><i class="iconfont icon-pageright next"></i></span></h3>';for(var t=0;t<i.roomTypeList.length;t++){n+='<section class=" mb40" id="type'+t+'">',n+='<div class="swiper-container"><div class="swiper-wrapper">';for(var o=0;o<i.roomTypeList[t].imgs.length;o++)n+='<div class="swiper-slide" style="background: white"><img style="width:'+e+";height:"+s+';"src="'+i.roomTypeList[t].imgs[o].fullPath+'" alt=""/></div>';i.roomTypeList[t].imgs.length>1&&(n+='</div><div class="swiper-button-prev swiper-button-white"></div><div class="swiper-button-next swiper-button-white"></div>'),n+='</div><p class="mb25">房间户型：</p><h3>'+i.roomTypeList[t].title+'</h3><p class="mb25" style="color:#c58d5d">¥ '+(0===parseInt(i.roomTypeList[t].roomType.price)?" 待更新 ":i.roomTypeList[t].roomType.price)+'</p><p class="mb25">房间设施：</p><ul class="icons">';for(var o=0;o<i.roomTypeList[t].facilities.length;o++)null!==i.roomTypeList[t].facilities[o]&&(n+=o>3?'<li class="hidden" data-id="'+i.roomTypeList[t].facilities[o].keyName+'"><div class="imgbox"><img src="'+i.roomTypeList[t].facilities[o].value+'" alt=""></div><span class="name">'+i.roomTypeList[t].facilities[o].description+"</span></li>":'<li data-id="'+i.roomTypeList[t].facilities[o].keyName+'"><div class="imgbox"><img src="'+i.roomTypeList[t].facilities[o].value+'" alt=""></div><span class="name">'+i.roomTypeList[t].facilities[o].description+"</span></li>");i.roomTypeList[t].facilities.length>4&&(n+='<p class="formore">查看更多</p>'),n+='<span class="clear"></span></ul>',n+="</section>"}n+='<span class="longline"></span>',$("#main>.roomconfigure").append(n),$(".roomconfigure section").each(function(){new Swiper("#"+$(this).attr("id")+" .swiper-container",{loop:!0,effect:"fade",preloadImages:!0,lazyLoading:!1,prevButton:"#"+$(this).attr("id")+" .swiper-button-prev",nextButton:"#"+$(this).attr("id")+" .swiper-button-next"}),1!==$(this).index()&&$(this).addClass("hidden"),sleep(300)});var a='<h3 class="mb25">公区配置</h3>';a+='<div class="swiper-container"><div class="swiper-wrapper">';for(var t=0;t<i.publicImgs.length;t++)a+='<div class="swiper-slide" style="background: white"><img src="'+i.publicImgs[t].fullPath+'" alt=""/></div>';a+='</div><i class="iconfont icon-fullscreen fullscreen"></i>',i.publicImgs.length>1&&(a+='<div class="swiper-button-prev swiper-button-white"></div><div class="swiper-button-next swiper-button-white"></div>'),a+='</div><p class="mb25">公区设施：</p><ul class="icons">';for(var o=0;o<i.facilities.length;o++)null!==i.facilities[o]&&(a+=o>3?'<li class="hidden" data-id="'+i.facilities[o].keyName+'"><div class="imgbox"><img src="'+i.facilities[o].value+'" alt=""></div><span class="name">'+i.facilities[o].description+"</span></li>":'<li data-id="'+i.facilities[o].keyName+'"><div class="imgbox"><img src="'+i.facilities[o].value+'" alt=""></div><span class="name">'+i.facilities[o].description+"</span></li>");i.facilities.length>4&&(a+='<p class="formore">查看更多</p>'),a+='<span class="clear"></span></ul>',$("#main>.publicconfigure").append(a),$("#publicconfigure .swiper-slide > img").css("height",1*$(window).width()/2+"px"),$("#publicconfigure .swiper-slide > img").css("width",$(window).width()+"px"),new Swiper(".publicconfigure .swiper-container",{loop:!0,autoplay:3e3,effect:"fade",preloadImages:!1,lazyLoading:!0,prevButton:".publicconfigure .swiper-button-prev",nextButton:".publicconfigure .swiper-button-next"})}$(function(){fillDetail(getCity_ProjectCode()[0])}),$(document).on("tap",".roomconfigure .iconfont",function(){var i;return $(this).hasClass("unable")?!1:($(this).hasClass("prev")?(i=$(".roomconfigure section:not(.hidden)").index()-1,i>=1&&$(".roomconfigure section").eq(i-1).removeClass("hidden").siblings("section").addClass("hidden")):$(this).hasClass("next")&&(i=$(".roomconfigure section:not(.hidden)").index()+1,i<=$(".roomconfigure section").length&&($(".roomconfigure .next").removeClass("unable"),$(".roomconfigure section").eq(1*i-1).removeClass("hidden").siblings("section").addClass("hidden"))),1==i?$(".roomconfigure .prev").addClass("unable"):$(".roomconfigure .prev").removeClass("unable"),i==$(".roomconfigure section").length?$(".roomconfigure .next").addClass("unable"):$(".roomconfigure .next").removeClass("unable"),void new Swiper($(".roomconfigure .box:visible").attr("id")+" .swiper-container",{loop:!0,autoplay:3e3,effect:"fade",preloadImages:!1,lazyLoading:!0,prevButton:$(".roomconfigure .box:visible").attr("id")+" .swiper-button-prev",nextButton:$(".roomconfigure .box:visible").attr("id")+" .swiper-button-next"}))}),$(document).on("click",".icons .formore",function(){$(this).siblings(".hidden").removeClass("hidden"),$(this).remove()}),$("nav ul li").click(function(i){i.preventDefault();var e=$("nav ul li").index($(this)),s=$(".section").eq(e).offset().top;$("html, body").animate({scrollTop:s},500)}),$(window).scroll(function(){if($(document).scrollTop()>$("#main>.banner").outerHeight()){var i=50*($("header").length+$(".fix-top").length);$("nav").css({position:"fixed",top:i,width:"100%"});var e=[];$(".section").each(function(i){e.push($(".section").eq(i).offset().top-300)});for(var s=0;s<e.length;s++)$(document).scrollTop()>e[s]&&$("nav ul li").removeClass("cur").eq(s).addClass("cur")}else $("nav").css({position:"static",top:"",width:""})}),$(document).on("click",".btn.booking",function(){return window.location.href="book.html?id="+getCity_ProjectCode()[1]+"_"+getCity_ProjectCode()[0],!1});